# 要件定義書

## プロジェクト概要

YouTubeの映像を視聴しながらスポーツ分析のための「アクション」と「ラベル」タグ付けを行うChrome拡張機能。

## 目的

- 映像分析における手作業の効率化。
- 特定のアクションの発生タイミングに応じて、タグを記録。
- 再視聴時に活用できるタイムライン情報の構築。

## 対象ユーザー

- スポーツコーチ
- トレーナー
- 映像分析担当者

## 対応プラットフォーム

- Google Chrome（Plasmo + Reactベースの拡張機能）

## 主な機能要件

### タグ付け機能

- YouTube視聴中に画面上に「アクションボタン」「ラベルボタン」をオーバーレイ表示。
- アクションボタンを押した時点でYouTubeの再生時刻（タイムスタンプ）を記録。
- アクションは開始と終了を1つのボタンでトグル操作（1度目押下で開始、2度目で終了）。
- ラベルボタンはアクション中に押下され、そのアクションに紐づくラベル情報となる。
- 複数のアクションが同時に進行することを許容。

### UI・UX

- ボタンの位置・レイアウトは自由に変更可能（例：2チーム分にグループ化）。
- 初期状態では数種類のプリセットを表示（例：シュート、パス、タックルなど）。
- ユーザーによるカスタム（アクション・ラベル・ホットキーの追加/削除）可能。
- ホットキー対応（ユーザーが設定画面で定義、JSON形式で保存）。

### データ保存

- アクション完了時（終了ボタン押下時）に自動保存。
- 保存形式:
  - ローカルファイル出力（CSV形式）
    - **新機能：カテゴリ別列出力** - 各カテゴリが個別の列として出力
    - 列構成：`Team, Action, Start, End, [カテゴリ1], [カテゴリ2], ...`
  - **新機能：JSON インポート/エクスポート** - ボタンセット設定の共有機能
  - Google Spread Sheet 出力（1行1アクション、ラベルはカンマ区切りで1セルにまとめる）

### タイムライン出力・共有

- 保存されたアクションをもとにタイムライン再視聴が可能（将来対応予定）。
- コメント欄へアクションのタイムスタンプを自動貼り付けする機能（将来対応予定）。

### ユーザー定義可能なアクションとラベル

- 設定画面でアクションボタンとラベルボタンを自由に定義可能。
- 定義内容はJSON形式でローカルストレージに保存される。
- 設定画面のUIには以下の要素を含む：
  - アクション/ラベルのリスト表示
  - 新規追加ボタン
  - 編集ボタン
  - 削除ボタン
- 保存された設定は拡張機能の再起動後も保持される。

#### 実装ステップ

1. 設定画面のUIを拡張し、アクションとラベルの管理機能を追加。
2. JSON形式で設定を保存するロジックを実装。
3. ローカルストレージから設定を読み込む機能を実装。
4. 設定内容をUIに反映するロジックを追加。
5. ユーザーが設定を変更した際にリアルタイムで保存されるようにする。

## ディレクトリ構成（Plasmo準拠）

```
YouCoder/
├── public/                      # 静的ファイル（アイコンなど）
├── popup.tsx                # ツールバーアイコン押下で表示されるUI
├── options.tsx              # オプション設定ページ
├──background.ts            # 拡張のバックグラウンド処理
├──content/
│   └── content.tsx          # YouTubeページに挿入されるタグ付けUI
│   ├── lib/                     # 共通ロジック、ユーティリティなど
│   ├── styles/                  # スタイルファイル
├── .plasmo/
│   └── manifest-base.json       # Plasmoで利用されるmanifestテンプレート
├── package.json
├── tsconfig.json
└── plasmo.config.ts
```

## 使用技術スタック

- フレームワーク: Plasmo, React
- 言語: TypeScript
- データ保存: CSVファイル / Google Sheets API
- スタイル: Tailwind CSS（予定）
- ホットキー設定: JSONベースのユーザー定義設定を localStorage 等に保持
