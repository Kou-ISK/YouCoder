# YouCoder - YouTubeスポーツ映像タグ付けツール

YouCoderは、YouTubeでスポーツ映像を視聴しながらリアルタイムでアクションにタグ付けができるChrome拡張機能です。  
スポーツコーチ、アナリスト、指導者向けに設計され、効率的な映像分析とデータ収集を可能にします。

## 主な特徴

- **リアルタイムタグ付け**: YouTube再生中にワンクリックでアクションとラベルを記録
- **カスタマイズ可能なボタンセット**: スポーツやチームに応じてボタンをカスタマイズ
- **カテゴリ化されたラベル機能**: ラベルをカテゴリ別に整理して詳細な分析が可能
- **高度なCSV出力**: カテゴリごとに列を分けたExcel解析に適した形式で出力
- **タイムラインナビゲーション**: 記録したアクションをクリックして動画の該当箇所にジャンプ
- **JSON設定共有**: ボタンセット設定を他のユーザーと簡単に共有
- **Plasmo + React**: モダンな技術スタックによる高速で安定した動作
- **Chrome Manifest V3完全対応**: 最新のブラウザセキュリティ基準に準拠

## デモ

🚧 デモは準備中です！  
_(UIが完成次第、スクリーンショットやアニメーションGIFを追加予定です。)_

## インストール

プロジェクトをローカルでセットアップするには：

```bash
git clone https://github.com/Kou-ISK/YouCoder.git
cd YouCoder
pnpm install
```

## 開発

開発サーバーを起動するには：

```bash
pnpm dev
# または
npm run dev
```

Chrome で開発版をロードするには：

```text
1. Chrome を開き、chrome://extensions にアクセス
2. 開発者モードを有効にする
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. build/chrome-mv3-dev ディレクトリを選択
```

## 使い方

### ボタンセットの管理

1. **ボタンセットの作成**: 「セット追加」ボタンから新しいボタンセットを作成します
2. **アクションの追加**: 「アクション追加」ボタンでボタンセットにアクションを追加します
3. **ラベルの追加**: アクションを選択後、「ラベル追加」でラベルを追加します

### JSON形式でのインポート/エクスポート

#### ボタンセットのエクスポート

1. ポップアップで「エクスポート」ボタンをクリック
2. 現在選択中のボタンセットがJSONファイルとして自動ダウンロードされます

#### ボタンセットのインポート

1. ポップアップで「インポート」ボタンをクリック
2. 正しい形式のJSONファイルを選択
3. 拡張機能がボタンセットを検証してインポートします

#### JSON形式

ボタンセットは**シンプル形式**（文字列配列）または**カテゴリ形式**（カテゴリ付きオブジェクト）のいずれかを使用できます。

**シンプル形式（レガシー）:**

```json
{
  "setName": "SOCCER",
  "buttons": [
    {
      "action": "pass",
      "labels": ["short pass", "long pass", "through pass"]
    },
    {
      "action": "shot",
      "labels": ["penalty", "free kick", "corner kick"]
    }
  ]
}
```

**カテゴリ形式（推奨）:**

```json
{
  "setName": "TENNIS",
  "buttons": [
    {
      "action": "serve",
      "labels": {
        "Result": ["ace", "fault", "double fault"],
        "Type": ["first serve", "second serve"]
      }
    },
    {
      "action": "rally",
      "labels": {
        "Shot Type": ["forehand", "backhand", "volley"],
        "Result": ["winner", "error"]
      }
    }
  ]
}
```

**ラベル形式について:**

- **シンプル形式**: ラベルは文字列の配列として保存されます
- **カテゴリ形式**: ラベルはカテゴリ別に整理されます（`Record<string, string[]>`）
- システムは後方互換性のため両方の形式をサポートします
- カテゴリ化されたラベルは、タイムラインとエクスポートで`[カテゴリ] 値`として表示されます
- CSV出力では、各カテゴリが個別の列として出力されます

### サンプルファイル

プロジェクトには、シンプル形式とカテゴリ形式の両方を実演するサンプルボタンセットファイルが含まれています：

- `sample-soccer.json` - サッカーボタンセット（カテゴリ形式）
- `sample-basketball.json` - バスケットボールボタンセット（カテゴリ形式）
- `sample-tennis.json` - テニスボタンセット（カテゴリ形式）

**カテゴリ形式の利点:**

- 意味のあるカテゴリによる整理されたラベル構造
- 各カテゴリが個別の列として出力される強化されたCSV出力
- カテゴリグループによる改善されたUI表示
- より優れたデータ分析機能

### 動画のタグ付け

1. YouTube動画にアクセス
2. 右側にタグ付けパネルが表示されます
3. チームとアクションを選択してタグ付けを開始
4. ラベルをクリックしてタイムスタンプを記録
5. タイムラインパネルで記録したアクションを表示・管理
6. エクスポートボタンでデータをCSV形式で出力

### CSV出力

この拡張機能は、カテゴリ化されたラベルの強化されたサポートを含む、記録されたアクションのCSV出力をサポートしています：

**出力機能:**

- タイムスタンプ付きの全記録アクション
- アクション名とラベル
- カテゴリ化されたラベルの各カテゴリが個別の列として出力
- 時間順でのソート

**CSV形式:**

- **シンプルラベル**: カンマ区切り値の単一「Labels」列
- **カテゴリ化されたラベル**:
  - 各カテゴリが個別の列（Team, Action, Start, End, + カテゴリ列）
  - カテゴリ名がアルファベット順でソート
  - 該当するカテゴリがないアクションは空文字

**CSV出力例:**

```csv
Team,Action,Start,End,Result,Shot Type,Type
A,serve,00:01:23,00:01:25,ace,,first serve
B,rally,00:01:45,00:01:47,,forehand,
```

## プロジェクト構成

```text
.
├── popup.tsx           # ポップアップUIのエントリーポイント
├── content.tsx         # コンテンツスクリプトのエントリーポイント
├── components/         # 再利用可能なReactコンポーネント
├── lib/                # ユーティリティ関数とサービス
├── styles/             # CSSやスタイリングリソース
├── docs/               # プロジェクトドキュメント
├── tsconfig.json       # TypeScript設定
├── package.json        # プロジェクトメタデータと依存関係
└── ...
```

## 使用技術

- [Plasmo](https://docs.plasmo.com/)
- React
- TypeScript
- pnpm
- Chrome Extension (Manifest V3)
